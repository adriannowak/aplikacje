---
title: SQL
layout: post
---

##  Import/Export danych do bazy MySQL


Zapisywanie kopii bazy danych:

 - `mysqldump.exe -u root -p -x -r DANE.SQL BAZA`
 
Przywracanie kopii:
 - logujemy sie na mysql i wykonujemy `CREATE DATABASE BAZA`
 - `mysql -u root -p BAZA < DANE.SQL`
 

Zadanie 1

Przywróć bazę danych - baza firma
https://gist.github.com/adriannowak/fe91b9d3e93b0ba0d92edb230cb67431

Zadanie 2

Wprowadz dane 3 osob:
```
    8, James, NULL, Wilsom, M, 1987-03-19, 1000, 3, 2013-10-09, 2014-03-01, 1
    9, Robert, NULL, Anderson, M, 1989-12-13, 2900, 2, 2013-12-20, 2014-05-05, 0
    10, John, Mark, Smith, M, 1990-05-24, 2500, 1, 2014-01-24, NULL, 1
```

## Naprawa bazy danych

Polecenie `mysqlcheck.exe NAZWA_BAZY`
 
 -- optimize
 
 -- repair
 
 -- check
 
 
## Polecenia administratora
```
CREATE USER 'ezn_select'@'localhost' IDENTIFIED BY 'ezn123';
```

```
GRANT SELECT ON ezn_123.* TO 'ezn_select'@'localhost';
```

## Polecenie SELECT
 
  - SELECT [*, column, DISTINCT column]
  - FROM
  - WHERE
  - Kolumny wyliczeniowe
  
Operatory porównania =, >, <, >=, <=, !=, <>, is [true,false,null], BETWEEN (liczby, daty), IN (liczby, tekst)
LIKE (%, _), DISTINCT,

```
SELECT * FROM employee;
SELECT FirstName, LastName FROM employee;

SELECT * FROM employee WHERE Salary >= 2500;

SELECT * FROM employee WHERE DepartmentId = 3
SELECT * FROM employee WHERE (Salary = 1000 OR Salary = 2000) AND DepartmentId = 4;
SELECT * FROM employee WHERE Active != 1; -- IS FALSE
SELECT *, Salary + 100 as "Pencja po podwyzce" FROM employee;
SELECT *, Salary * 1.1 as "po podwyzce" from employee;
SELECT FirstName, Salary*1.1 From employee WHERE Salary*1.1 >= 2500;
SELECT * FROM employee WHERE Gender = 'W' AND BirthDate >= '1990-01-01' AND Salary <= 2000;

SELECT * FROM employee WHERE Gender = 'M' AND Salary >1000 AND Salary < 2000;

SELECT * FROM employee WHERE Gender = 'M' AND Salary BETWEEN 1000 AND 2000;
SELECT * FROM employee WHERE HireDate BETWEEN '2012-01-01' AND '2013-12-30';

SELECT * FROM employee WHERE Salary < 1000 OR Salary > 2000;

SELECT * FROM employee WHERE Salary NOT BETWEEN 1000 AND 2000

SELECT * FROM employee WHERE Id = 1 OR Id = 2 OR Id = 3;
SELECT * FROM employee WHERE Id BETWEEN 1 AND 3;
SELECT * FROM employee WHERE Id IN (1,2,3);

SELECT * FROM employee WHERE Id <> 1 AND Id <> 2 AND Id <> 3;
SELECT * FROM employee WHERE Id NOT BETWEEN 1 AND 3;
SELECT * FROM employee WHERE Id NOT IN (1,2,3);

SELECT * FROM employee WHERE FirstName = 'John' and Salary > 1500;



SELECT * FROM employee WHERE FirstName = 'John' OR FistName = 'Linda';
SELECT * FROM employee WHERE FirstName IN ('John','Linda');

 SELECT * FROM employee WHERE FirstName LIKE 'J%';
SELECT * FROM employee WHERE FirstName LIKE  '_a%';

SELECT * FROM employee ORDER BY LastName, FirstName

SELECT * FROM employee ORDER BY LastName DESC, FirstName DESC

SELECT * FROM employee ORDER BY Salary DESC;

SELECT * FROM employee ORDER BY Salary DESC LIMIT 3
```


## Zadania 

https://gist.github.com/adriannowak/89d54173ee0d49e69ce76a5af342f217


1. Znajdź dane wszystkich firm, których nazwa (kolumna Name ) rozpoczyna się od litery „P”.

2. Znajdź dane wszystkich firm, które znajdują się w mieście (kolumna CityId ) o identyfi katorze równym 1 i których kod pocztowy (kolumna PostCode ) rozpoczyna się cyfrą 5.

3. Znajdź wszystkie firmy, które zostały założone w 2000 roku. Załóż, że w kolumnie. StartDate jest przechowywana data bez godziny, i rozwiąż zadanie na dwa sposoby.

4. Dla aktywnych firm (kolumna Active ), zatrudniających więcej niż 1000 pracowników (kolumna EmployeeCount), wyświetl: nazwę, przychód roczny (kolumna AnnualIncome ) oraz przychód miesięczny

5. Wyświetl nazwę oraz przychód miesięczny dla trzech firm mających najwyższy spośród wszystkich przychód miesięczny

6. Znajdź firmy, których miesięczny przychód jest większy niż 10000 zł.

7. Znajdź dane tych firm, których kod pocztowy to: 54-621, 78-695 lub 63-896. Dla tych firm wyświetl: nazwę, kod pocztowy oraz ulicę (kolumna Street ) i numer (kolumna Number ). Ulicę i numer wyświetl w jednej kolumnie. Zadanie rozwiąż na dwa sposoby.

8. Dla danych wszystkich firm wyświetl: nazwę oraz ulicę i numer. Ulicę i numer wyświetl w jednej kolumnie. Dla firm, dla których nie zdefiniowano ulicy, zamiast ulicy wyświetl tekst „ulica nieznana” .

9. Wyświetl wszystkie firmy, które mają siedzibę w mieście o identyfikatorze różnym niż 1 , 3 i 5 . Zadanie rozwiąż na dwa sposoby.

10. Wyświetl dane wszystkich aktywnych firm, które nie mają podanej daty rozpoczęcia działalności.

11. Wyświetl wszystkie firmy, których nazwa spełnia następujące warunki:
 - pierwsza litera to „C”, „P” lub „T”,
 - ostatnia litera to „O” lub „R”

12. Wyświetl wszystkie firmy, których nazwa spełnia następujące warunki:
 - druga litera to „O”,
 - ostatnia litera jest różna od „E”

13. Wyświetl trzy firmy, które były najwcześniej założone

14. Dla każdej aktywnej firmy, która zatrudnia mniej niż 1000 osób, wyświetl: nazwę firmy, liczbę zatrudnionych oraz liczbę osób, której brakuje do tego, by firma zatrudniała 1000 osób

15. Dla wszystkich aktywnych firm wyświetl nazwę firmy oraz kwotę, którą dostałby każdy pracownik, gdyby rozdzielić 
zatrudnionym po równo cały roczny przychód.

16. Wyświetl nazwy firm, w których roczny przychód przypadający na pracownika (z po-
przedniego zadania) jest większy niż 300 zł.

17. Wyświetl firmę o największym rocznym przychodzie na pracownika.

18. Wyświetl wszystkie aktywne firmy, które mają siedzibę w mieście o identyfikatorze (kolumna CityId ) równym 1 lub 2 , oraz o liczbie pracowników mniejszej niż 500 lub większej niż 1500.

19. Wyświetl wszystkie unikalne nazwy ulic.

20. Dla wszystkich firm, które mają zdefiniowane miasto, w którym się znajdują, wyświetl: nazwę firmy, identyfikator miasta, roczny przychód oraz liczbę zatrudnionych pracowników. Wyniki uporządkuj według identyfikatora miasta (kolumna CityId ). Firmy o takim samym identyfikatorze miasta uporządkuj malejąco według rocznego przychodu. Firmy o takim samym rocznym przychodzie uporządkuj malejąco według liczby pracowników.

21. Wyświetl wszystkie aktywne firmy, które nie nazywają się Casio ani Yamaha. Zadanie rozwiąż na dwa sposoby
